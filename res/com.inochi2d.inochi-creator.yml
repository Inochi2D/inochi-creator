id: com.inochi2d.inochi-creator
runtime: org.kde.Platform
runtime-version: "5.15-21.08"
sdk: org.kde.Sdk
# sdk-extensions:
#   - org.freedesktop.Sdk.Extension.ldc
#   - org.freedesktop.Sdk.Extension.dmd
command: "inochi-creator"
finish-args:
    - "--device=all" #OpenGL rendering, webcams (may be required? not sure)
    - "--socket=x11"
    - "--share=ipc" # The X and Wayland sockets are permanently exposed, because kdialog takes longer to start if it only has X access, and doesn't work at all if only using Wayland.
    - "--socket=wayland"
    - "--filesystem=host" #This is a dev tool, it should probably have as much access to the host as it can. It also doesn't yet utilize portals.
    - "--env=XDG_CURRENT_DESKTOP=KDE" #Hopefully fixes the issues it has with running on non-KDE desktops.

add-extensions:
  org.freedesktop.Platform.ffmpeg-full:
#    directory: lib/ffmpeg
#    add-ld-path: .
    version: '21.08'
    autodownload: true
    autodelete: false

modules:
  # --- Tools ---
  - name: xprop
    sources: 
      - type: archive
        url: https://xorg.freedesktop.org/archive/individual/app/xprop-1.2.4.tar.bz2
        sha256: "8c77fb096e46c60032b7e2bde9492c3ffcc18734f50b395085a5f10bfd3cf753"

  - name: zenity
    buildsystem: meson
    sources:
      - type: archive
        url: https://download.gnome.org/sources/zenity/3.41/zenity-3.41.0.tar.xz
        sha256: 19b676c3510e22badfcc3204062d432ba537402f5e0ae26128c0d90c954037e1

  - name: kdialog
    buildsystem: cmake
    sources:
      - type: git
        url: https://github.com/KDE/kdialog.git


  - name: Inochi Creator
    buildsystem: simple
    build-commands:
      - ls -a 



    sources: 
      - type: archive
        url: https://github.com/Inochi2D/inochi-creator/releases/download/v0.7.3/inochi-creator-linux-x86_64.zip
        sha256: 123678798876543423


